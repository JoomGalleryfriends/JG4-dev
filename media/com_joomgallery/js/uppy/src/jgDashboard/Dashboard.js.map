{"version":3,"names":["h","UIPlugin","StatusBar","Informer","ThumbnailGenerator","findAllDOMElements","toArray","getDroppedFiles","nanoid","memoizeOne","trapFocus","createSuperFocus","DashboardUI","packageJson","locale","memoize","default","TAB_KEY","ESC_KEY","createPromise","o","promise","Promise","resolve","reject","defaultPickerIcon","Dashboard","constructor","uppy","opts","removeTarget","plugin","pluginState","getPluginState","newTargets","targets","filter","target","id","setPluginState","addTarget","callerPluginId","name","callerPluginName","title","callerPluginType","type","msg","log","undefined","state","slice","push","el","hideAllPanels","update","activePickerPanel","showAddFilesPanel","activeOverlayType","fileCardFor","showFileEditor","showPanel","emit","canEditFile","file","editors","some","getPlugin","openFileEditor","forEach","editor","selectFile","saveFileEditor","save","openModal","savedScrollPosition","window","pageYOffset","savedActiveElement","document","activeElement","disablePageScrollWhenModalOpen","body","classList","add","animateOpenClose","isClosing","handler","isHidden","removeEventListener","addEventListener","browserBackButtonClose","updateBrowserHistory","handleKeyDownInModal","closeModal","manualClose","remove","superFocus","cancel","focus","history","modalName","back","isModalOpen","requestCloseModal","onRequestCloseModal","setDarkModeCapability","isDarkModeOn","capabilities","getState","setState","darkMode","handleSystemDarkModeChange","event","isDarkModeOnNow","matches","toggleFileCard","show","fileID","getFile","toggleAddFilesPanel","addFiles","files","descriptors","map","source","data","meta","relativePath","webkitRelativePath","err","startListeningToResize","resizeObserver","ResizeObserver","entries","uppyDashboardInnerEl","width","height","contentRect","containerWidth","containerHeight","areInsidesReadyToBeVisible","observe","querySelector","makeDashboardInsidesVisibleAnywayTimeout","setTimeout","isModalAndClosed","inline","stopListeningToResize","disconnect","clearTimeout","recordIfFocusedOnUppyRecently","contains","ifFocusedOnUppyRecently","disableInteractiveElements","disable","NODES_TO_DISABLE","nodesToDisable","querySelectorAll","node","tagName","setAttribute","disabled","dashboardIsDisabled","pushState","handlePopState","keyCode","forModal","handleClickOutside","closeModalOnClickOutside","handlePaste","iteratePlugins","handleRootPaste","clipboardData","length","handleInputChange","preventDefault","handleDragOver","stopPropagation","canSomePluginHandleRootDrop","somePluginCanHandleRootDrop","canHandleRootDrop","doesEventHaveFiles","types","dataTransfer","hasFiles","disableLocalFiles","allowNewUpload","dropEffect","removeDragOverClassTimeout","isDraggingOver","onDragOver","handleDragLeave","onDragLeave","handleDrop","handleRootDrop","executedDropErrorOnce","logDropError","error","info","message","onDrop","handleRequestThumbnail","waitForThumbnailsBeforeUpload","handleCancelThumbnail","handleKeyDownInInline","forInline","handlePasteOnBody","isFocusInOverlay","handleComplete","failed","closeAfterFinish","handleCancelRestore","disableThumbnailGenerator","LARGE_THUMBNAIL","getFiles","thumbnailGenerator","setOptions","thumbnailWidth","fileForThumbnail","preview","requestThumbnail","then","firstFile","initEvents","trigger","showModalTrigger","on","autoOpenFileEditor","removeEvents","off","superFocusOnEachUpdate","isFocusInUppy","isFocusNowhere","isInformerHidden","isModal","afterUpdate","saveFileCard","setFileMeta","icon","render","isSupported","newFiles","uploadStartedFiles","completeFiles","erroredFiles","inProgressFiles","inProgressNotPausedFiles","processingFiles","isUploadStarted","isAllComplete","isAllErrored","isAllPaused","getObjectOfFilesPerState","acquirers","progressindicators","theme","indexOf","fileManagerSelectionType","console","warn","totalFileCount","Object","keys","totalProgress","direction","autoProceed","i18n","i18nArray","note","recoveredState","metaFields","resumableUploads","individualCancellation","isMobileDevice","showLinkToFileUploadResult","proudlyDisplayPoweredByUppy","hideCancelButton","hideRetryButton","hidePauseResumeButton","showRemoveButtonAfterComplete","isTargetDOMEl","parentElement","allowedFileTypes","restrictions","maxNumberOfFiles","requiredMetaFields","showSelectedFiles","showNativePhotoCameraButton","showNativeVideoCameraButton","nativeCameraFacingMode","singleFileFullScreen","discoverProviderPlugins","install","Error","allowMultipleUploads","allowMultipleUploadBatches","mount","plugins","pluginID","disableStatusBar","use","hideUploadButton","showProgressDetails","hideAfterFinish","hideProgressAfterFinish","doneButtonHandler","disableInformer","thumbnailHeight","thumbnailType","lazy","darkModeMediaQuery","matchMedia","isDarkModeOnFromTheStart","addListener","uninstall","informer","removePlugin","statusBar","thumbnail","unmount","removeListener","defaultLocale","defaultOptions","cancelAll","i18nInit","VERSION","version"],"sources":["Dashboard.jsx"],"sourcesContent":["import { h } from 'preact'\nimport { UIPlugin } from '@uppy/core'\nimport StatusBar from '@uppy/status-bar'\nimport Informer from '@uppy/informer'\nimport ThumbnailGenerator from '@uppy/thumbnail-generator'\nimport findAllDOMElements from '@uppy/utils/lib/findAllDOMElements'\nimport toArray from '@uppy/utils/lib/toArray'\nimport getDroppedFiles from '@uppy/utils/lib/getDroppedFiles'\nimport { nanoid } from 'nanoid/non-secure'\nimport memoizeOne from 'memoize-one'\nimport * as trapFocus from './utils/trapFocus.js'\nimport createSuperFocus from './utils/createSuperFocus.js'\nimport DashboardUI from './components/Dashboard.jsx'\n\nimport packageJson from '../package.json'\nimport locale from './locale.js'\n\nconst memoize = memoizeOne.default || memoizeOne\n\nconst TAB_KEY = 9\nconst ESC_KEY = 27\n\nfunction createPromise () {\n  const o = {}\n  o.promise = new Promise((resolve, reject) => {\n    o.resolve = resolve\n    o.reject = reject\n  })\n  return o\n}\n\nfunction defaultPickerIcon () {\n  return (\n    <svg aria-hidden=\"true\" focusable=\"false\" width=\"30\" height=\"30\" viewBox=\"0 0 30 30\">\n      <path d=\"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z\" />\n    </svg>\n  )\n}\n\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nexport default class Dashboard extends UIPlugin {\n  static VERSION = packageJson.version\n\n  #disabledNodes = null\n\n  constructor (uppy, opts) {\n    super(uppy, opts)\n    this.id = this.opts.id || 'Dashboard'\n    this.title = 'Dashboard'\n    this.type = 'orchestrator'\n    this.modalName = `uppy-Dashboard-${nanoid()}`\n\n    this.defaultLocale = locale\n\n    // set default options, must be kept in sync with packages/@uppy/react/src/DashboardModal.js\n    const defaultOptions = {\n      target: 'body',\n      metaFields: [],\n      trigger: null,\n      inline: false,\n      width: 750,\n      height: 550,\n      thumbnailWidth: 280,\n      thumbnailType: 'image/jpeg',\n      waitForThumbnailsBeforeUpload: false,\n      defaultPickerIcon,\n      showLinkToFileUploadResult: false,\n      showProgressDetails: false,\n      hideUploadButton: false,\n      hideCancelButton: false,\n      hideRetryButton: false,\n      hidePauseResumeButton: false,\n      hideProgressAfterFinish: false,\n      doneButtonHandler: () => {\n        this.uppy.cancelAll()\n        this.requestCloseModal()\n      },\n      note: null,\n      closeModalOnClickOutside: false,\n      closeAfterFinish: false,\n      singleFileFullScreen: true,\n      disableStatusBar: false,\n      disableInformer: false,\n      disableThumbnailGenerator: false,\n      disablePageScrollWhenModalOpen: true,\n      animateOpenClose: true,\n      fileManagerSelectionType: 'files',\n      proudlyDisplayPoweredByUppy: true,\n      onRequestCloseModal: () => this.closeModal(),\n      showSelectedFiles: true,\n      showRemoveButtonAfterComplete: false,\n      browserBackButtonClose: false,\n      showNativePhotoCameraButton: false,\n      showNativeVideoCameraButton: false,\n      theme: 'light',\n      autoOpenFileEditor: false,\n      disabled: false,\n      disableLocalFiles: false,\n    }\n\n    // merge default options with the ones set by user\n    this.opts = { ...defaultOptions, ...opts }\n\n    this.i18nInit()\n\n    this.superFocus = createSuperFocus()\n    this.ifFocusedOnUppyRecently = false\n\n    // Timeouts\n    this.makeDashboardInsidesVisibleAnywayTimeout = null\n    this.removeDragOverClassTimeout = null\n  }\n\n  removeTarget = (plugin) => {\n    const pluginState = this.getPluginState()\n    // filter out the one we want to remove\n    const newTargets = pluginState.targets.filter(target => target.id !== plugin.id)\n\n    this.setPluginState({\n      targets: newTargets,\n    })\n  }\n\n  addTarget = (plugin) => {\n    const callerPluginId = plugin.id || plugin.constructor.name\n    const callerPluginName = plugin.title || callerPluginId\n    const callerPluginType = plugin.type\n\n    if (callerPluginType !== 'acquirer'\n        && callerPluginType !== 'progressindicator'\n        && callerPluginType !== 'editor') {\n      const msg = 'Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor'\n      this.uppy.log(msg, 'error')\n      return undefined\n    }\n\n    const target = {\n      id: callerPluginId,\n      name: callerPluginName,\n      type: callerPluginType,\n    }\n\n    const state = this.getPluginState()\n    const newTargets = state.targets.slice()\n    newTargets.push(target)\n\n    this.setPluginState({\n      targets: newTargets,\n    })\n\n    return this.el\n  }\n\n  hideAllPanels = () => {\n    const state = this.getPluginState()\n    const update = {\n      activePickerPanel: false,\n      showAddFilesPanel: false,\n      activeOverlayType: null,\n      fileCardFor: null,\n      showFileEditor: false,\n    }\n\n    if (state.activePickerPanel === update.activePickerPanel\n        && state.showAddFilesPanel === update.showAddFilesPanel\n        && state.showFileEditor === update.showFileEditor\n        && state.activeOverlayType === update.activeOverlayType) {\n      // avoid doing a state update if nothing changed\n      return\n    }\n\n    this.setPluginState(update)\n  }\n\n  showPanel = (id) => {\n    const { targets } = this.getPluginState()\n\n    const activePickerPanel = targets.filter((target) => {\n      return target.type === 'acquirer' && target.id === id\n    })[0]\n\n    this.setPluginState({\n      activePickerPanel,\n      activeOverlayType: 'PickerPanel',\n    })\n\n    this.uppy.emit('dashboard:show-panel', id)\n  }\n\n  canEditFile = (file) => {\n    const { targets } = this.getPluginState()\n    const editors = this.#getEditors(targets)\n\n    return editors.some((target) => (\n      this.uppy.getPlugin(target.id).canEditFile(file)\n    ))\n  }\n\n  openFileEditor = (file) => {\n    const { targets } = this.getPluginState()\n    const editors = this.#getEditors(targets)\n\n    this.setPluginState({\n      showFileEditor: true,\n      fileCardFor: file.id || null,\n      activeOverlayType: 'FileEditor',\n    })\n\n    editors.forEach((editor) => {\n      this.uppy.getPlugin(editor.id).selectFile(file)\n    })\n  }\n\n  saveFileEditor = () => {\n    const { targets } = this.getPluginState()\n    const editors = this.#getEditors(targets)\n\n    editors.forEach((editor) => {\n      this.uppy.getPlugin(editor.id).save()\n    })\n\n    this.hideAllPanels()\n  }\n\n  openModal = () => {\n    const { promise, resolve } = createPromise()\n    // save scroll position\n    this.savedScrollPosition = window.pageYOffset\n    // save active element, so we can restore focus when modal is closed\n    this.savedActiveElement = document.activeElement\n\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.add('uppy-Dashboard-isFixed')\n    }\n\n    if (this.opts.animateOpenClose && this.getPluginState().isClosing) {\n      const handler = () => {\n        this.setPluginState({\n          isHidden: false,\n        })\n        this.el.removeEventListener('animationend', handler, false)\n        resolve()\n      }\n      this.el.addEventListener('animationend', handler, false)\n    } else {\n      this.setPluginState({\n        isHidden: false,\n      })\n      resolve()\n    }\n\n    if (this.opts.browserBackButtonClose) {\n      this.updateBrowserHistory()\n    }\n\n    // handle ESC and TAB keys in modal dialog\n    document.addEventListener('keydown', this.handleKeyDownInModal)\n\n    this.uppy.emit('dashboard:modal-open')\n\n    return promise\n  }\n\n  closeModal = (opts = {}) => {\n    const {\n      // Whether the modal is being closed by the user (`true`) or by other means (e.g. browser back button)\n      manualClose = true,\n    } = opts\n\n    const { isHidden, isClosing } = this.getPluginState()\n    if (isHidden || isClosing) {\n      // short-circuit if animation is ongoing\n      return undefined\n    }\n\n    const { promise, resolve } = createPromise()\n\n    if (this.opts.disablePageScrollWhenModalOpen) {\n      document.body.classList.remove('uppy-Dashboard-isFixed')\n    }\n\n    if (this.opts.animateOpenClose) {\n      this.setPluginState({\n        isClosing: true,\n      })\n      const handler = () => {\n        this.setPluginState({\n          isHidden: true,\n          isClosing: false,\n        })\n\n        this.superFocus.cancel()\n        this.savedActiveElement.focus()\n\n        this.el.removeEventListener('animationend', handler, false)\n        resolve()\n      }\n      this.el.addEventListener('animationend', handler, false)\n    } else {\n      this.setPluginState({\n        isHidden: true,\n      })\n\n      this.superFocus.cancel()\n      this.savedActiveElement.focus()\n\n      resolve()\n    }\n\n    // handle ESC and TAB keys in modal dialog\n    document.removeEventListener('keydown', this.handleKeyDownInModal)\n\n    if (manualClose) {\n      if (this.opts.browserBackButtonClose) {\n        // Make sure that the latest entry in the history state is our modal name\n        // eslint-disable-next-line no-restricted-globals\n        if (history.state?.[this.modalName]) {\n          // Go back in history to clear out the entry we created (ultimately closing the modal)\n          // eslint-disable-next-line no-restricted-globals\n          history.back()\n        }\n      }\n    }\n\n    this.uppy.emit('dashboard:modal-closed')\n\n    return promise\n  }\n\n  isModalOpen = () => {\n    return !this.getPluginState().isHidden || false\n  }\n\n  requestCloseModal = () => {\n    if (this.opts.onRequestCloseModal) {\n      return this.opts.onRequestCloseModal()\n    }\n    return this.closeModal()\n  }\n\n  setDarkModeCapability = (isDarkModeOn) => {\n    const { capabilities } = this.uppy.getState()\n    this.uppy.setState({\n      capabilities: {\n        ...capabilities,\n        darkMode: isDarkModeOn,\n      },\n    })\n  }\n\n  handleSystemDarkModeChange = (event) => {\n    const isDarkModeOnNow = event.matches\n    this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnNow ? 'on' : 'off'}`)\n    this.setDarkModeCapability(isDarkModeOnNow)\n  }\n\n  toggleFileCard = (show, fileID) => {\n    const file = this.uppy.getFile(fileID)\n    if (show) {\n      this.uppy.emit('dashboard:file-edit-start', file)\n    } else {\n      this.uppy.emit('dashboard:file-edit-complete', file)\n    }\n\n    this.setPluginState({\n      fileCardFor: show ? fileID : null,\n      activeOverlayType: show ? 'FileCard' : null,\n    })\n  }\n\n  toggleAddFilesPanel = (show) => {\n    this.setPluginState({\n      showAddFilesPanel: show,\n      activeOverlayType: show ? 'AddFiles' : null,\n    })\n  }\n\n  addFiles = (files) => {\n    const descriptors = files.map((file) => ({\n      source: this.id,\n      name: file.name,\n      type: file.type,\n      data: file,\n      meta: {\n        // path of the file relative to the ancestor directory the user selected.\n        // e.g. 'docs/Old Prague/airbnb.pdf'\n        relativePath: file.relativePath || file.webkitRelativePath || null,\n      },\n    }))\n\n    try {\n      this.uppy.addFiles(descriptors)\n    } catch (err) {\n      this.uppy.log(err)\n    }\n  }\n\n  // ___Why make insides of Dashboard invisible until first ResizeObserver event is emitted?\n  //    ResizeOberserver doesn't emit the first resize event fast enough, users can see the jump from one .uppy-size-- to\n  //    another (e.g. in Safari)\n  // ___Why not apply visibility property to .uppy-Dashboard-inner?\n  //    Because ideally, acc to specs, ResizeObserver should see invisible elements as of width 0. So even though applying\n  //    invisibility to .uppy-Dashboard-inner works now, it may not work in the future.\n  startListeningToResize = () => {\n    // Watch for Dashboard container (`.uppy-Dashboard-inner`) resize\n    // and update containerWidth/containerHeight in plugin state accordingly.\n    // Emits first event on initialization.\n    this.resizeObserver = new ResizeObserver((entries) => {\n      const uppyDashboardInnerEl = entries[0]\n      const { width, height } = uppyDashboardInnerEl.contentRect\n\n      this.setPluginState({\n        containerWidth: width,\n        containerHeight: height,\n        areInsidesReadyToBeVisible: true,\n      })\n    })\n    this.resizeObserver.observe(this.el.querySelector('.uppy-Dashboard-inner'))\n\n    // If ResizeObserver fails to emit an event telling us what size to use - default to the mobile view\n    this.makeDashboardInsidesVisibleAnywayTimeout = setTimeout(() => {\n      const pluginState = this.getPluginState()\n      const isModalAndClosed = !this.opts.inline && pluginState.isHidden\n      if (// We might want to enable this in the future\n\n        // if ResizeObserver hasn't yet fired,\n        !pluginState.areInsidesReadyToBeVisible\n        // and it's not due to the modal being closed\n        && !isModalAndClosed\n      ) {\n        this.uppy.log('[Dashboard] resize event didn’t fire on time: defaulted to mobile layout', 'warning')\n\n        this.setPluginState({\n          areInsidesReadyToBeVisible: true,\n        })\n      }\n    }, 1000)\n  }\n\n  stopListeningToResize = () => {\n    this.resizeObserver.disconnect()\n\n    clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)\n  }\n\n  // Records whether we have been interacting with uppy right now,\n  // which is then used to determine whether state updates should trigger a refocusing.\n  recordIfFocusedOnUppyRecently = (event) => {\n    if (this.el.contains(event.target)) {\n      this.ifFocusedOnUppyRecently = true\n    } else {\n      this.ifFocusedOnUppyRecently = false\n      // ___Why run this.superFocus.cancel here when it already runs in superFocusOnEachUpdate?\n      //    Because superFocus is debounced, when we move from Uppy to some other element on the page,\n      //    previously run superFocus sometimes hits and moves focus back to Uppy.\n      this.superFocus.cancel()\n    }\n  }\n\n  disableInteractiveElements = (disable) => {\n    const NODES_TO_DISABLE = [\n      'a[href]',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      'button:not([disabled])',\n      '[role=\"button\"]:not([disabled])',\n    ]\n\n    const nodesToDisable = this.#disabledNodes ?? toArray(this.el.querySelectorAll(NODES_TO_DISABLE))\n      .filter(node => !node.classList.contains('uppy-Dashboard-close'))\n\n    for (const node of nodesToDisable) {\n      // Links can’t have `disabled` attr, so we use `aria-disabled` for a11y\n      if (node.tagName === 'A') {\n        node.setAttribute('aria-disabled', disable)\n      } else {\n        node.disabled = disable\n      }\n    }\n\n    if (disable) {\n      this.#disabledNodes = nodesToDisable\n    } else {\n      this.#disabledNodes = null\n    }\n\n    this.dashboardIsDisabled = disable\n  }\n\n  updateBrowserHistory = () => {\n    // Ensure history state does not already contain our modal name to avoid double-pushing\n    // eslint-disable-next-line no-restricted-globals\n    if (!history.state?.[this.modalName]) {\n      // Push to history so that the page is not lost on browser back button press\n      // eslint-disable-next-line no-restricted-globals\n      history.pushState({\n        // eslint-disable-next-line no-restricted-globals\n        ...history.state,\n        [this.modalName]: true,\n      }, '')\n    }\n\n    // Listen for back button presses\n    window.addEventListener('popstate', this.handlePopState, false)\n  }\n\n  handlePopState = (event) => {\n    // Close the modal if the history state no longer contains our modal name\n    if (this.isModalOpen() && (!event.state || !event.state[this.modalName])) {\n      this.closeModal({ manualClose: false })\n    }\n\n    // When the browser back button is pressed and uppy is now the latest entry\n    // in the history but the modal is closed, fix the history by removing the\n    // uppy history entry.\n    // This occurs when another entry is added into the history state while the\n    // modal is open, and then the modal gets manually closed.\n    // Solves PR #575 (https://github.com/transloadit/uppy/pull/575)\n    if (!this.isModalOpen() && event.state?.[this.modalName]) {\n      // eslint-disable-next-line no-restricted-globals\n      history.back()\n    }\n  }\n\n  handleKeyDownInModal = (event) => {\n    // close modal on esc key press\n    if (event.keyCode === ESC_KEY) this.requestCloseModal(event)\n    // trap focus on tab key press\n    if (event.keyCode === TAB_KEY) trapFocus.forModal(event, this.getPluginState().activeOverlayType, this.el)\n  }\n\n  handleClickOutside = () => {\n    if (this.opts.closeModalOnClickOutside) this.requestCloseModal()\n  }\n\n  handlePaste = (event) => {\n    // Let any acquirer plugin (Url/Webcam/etc.) handle pastes to the root\n    this.uppy.iteratePlugins((plugin) => {\n      if (plugin.type === 'acquirer') {\n        // Every Plugin with .type acquirer can define handleRootPaste(event)\n        plugin.handleRootPaste?.(event)\n      }\n    })\n\n    // Add all dropped files\n    const files = toArray(event.clipboardData.files)\n    if (files.length > 0) {\n      this.uppy.log('[Dashboard] Files pasted')\n      this.addFiles(files)\n    }\n  }\n\n  handleInputChange = (event) => {\n    event.preventDefault()\n    const files = toArray(event.target.files)\n    if (files.length > 0) {\n      this.uppy.log('[Dashboard] Files selected through input')\n      this.addFiles(files)\n    }\n  }\n\n  handleDragOver = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    // Check if some plugin can handle the datatransfer without files —\n    // for instance, the Url plugin can import a url\n    const canSomePluginHandleRootDrop = () => {\n      let somePluginCanHandleRootDrop = true\n      this.uppy.iteratePlugins((plugin) => {\n        if (plugin.canHandleRootDrop?.(event)) {\n          somePluginCanHandleRootDrop = true\n        }\n      })\n      return somePluginCanHandleRootDrop\n    }\n\n    // Check if the \"type\" of the datatransfer object includes files\n    const doesEventHaveFiles = () => {\n      const { types } = event.dataTransfer\n      return types.some(type => type === 'Files')\n    }\n\n    // Deny drop, if no plugins can handle datatransfer, there are no files,\n    // or when opts.disabled is set, or new uploads are not allowed\n    const somePluginCanHandleRootDrop = canSomePluginHandleRootDrop(event)\n    const hasFiles = doesEventHaveFiles(event)\n    if (\n      (!somePluginCanHandleRootDrop && !hasFiles)\n      || this.opts.disabled\n      // opts.disableLocalFiles should only be taken into account if no plugins\n      // can handle the datatransfer\n      || (this.opts.disableLocalFiles && (hasFiles || !somePluginCanHandleRootDrop))\n      || !this.uppy.getState().allowNewUpload\n    ) {\n      event.dataTransfer.dropEffect = 'none' // eslint-disable-line no-param-reassign\n      clearTimeout(this.removeDragOverClassTimeout)\n      return\n    }\n\n    // Add a small (+) icon on drop\n    // (and prevent browsers from interpreting this as files being _moved_ into the\n    // browser, https://github.com/transloadit/uppy/issues/1978).\n    event.dataTransfer.dropEffect = 'copy' // eslint-disable-line no-param-reassign\n\n    clearTimeout(this.removeDragOverClassTimeout)\n    this.setPluginState({ isDraggingOver: true })\n\n    this.opts.onDragOver?.(event)\n  }\n\n  handleDragLeave = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    clearTimeout(this.removeDragOverClassTimeout)\n    // Timeout against flickering, this solution is taken from drag-drop library.\n    // Solution with 'pointer-events: none' didn't work across browsers.\n    this.removeDragOverClassTimeout = setTimeout(() => {\n      this.setPluginState({ isDraggingOver: false })\n    }, 50)\n\n    this.opts.onDragLeave?.(event)\n  }\n\n  handleDrop = async (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n\n    clearTimeout(this.removeDragOverClassTimeout)\n\n    this.setPluginState({ isDraggingOver: false })\n\n    // Let any acquirer plugin (Url/Webcam/etc.) handle drops to the root\n    this.uppy.iteratePlugins((plugin) => {\n      if (plugin.type === 'acquirer') {\n        // Every Plugin with .type acquirer can define handleRootDrop(event)\n        plugin.handleRootDrop?.(event)\n      }\n    })\n\n    // Add all dropped files\n    let executedDropErrorOnce = false\n    const logDropError = (error) => {\n      this.uppy.log(error, 'error')\n\n      // In practice all drop errors are most likely the same,\n      // so let's just show one to avoid overwhelming the user\n      if (!executedDropErrorOnce) {\n        this.uppy.info(error.message, 'error')\n        executedDropErrorOnce = true\n      }\n    }\n\n    this.uppy.log('[Dashboard] Processing dropped files')\n\n    // Add all dropped files\n    const files = await getDroppedFiles(event.dataTransfer, { logDropError })\n    if (files.length > 0) {\n      this.uppy.log('[Dashboard] Files dropped')\n      this.addFiles(files)\n    }\n\n    this.opts.onDrop?.(event)\n  }\n\n  handleRequestThumbnail = (file) => {\n    if (!this.opts.waitForThumbnailsBeforeUpload) {\n      this.uppy.emit('thumbnail:request', file)\n    }\n  }\n\n  /**\n   * We cancel thumbnail requests when a file item component unmounts to avoid\n   * clogging up the queue when the user scrolls past many elements.\n   */\n  handleCancelThumbnail = (file) => {\n    if (!this.opts.waitForThumbnailsBeforeUpload) {\n      this.uppy.emit('thumbnail:cancel', file)\n    }\n  }\n\n  handleKeyDownInInline = (event) => {\n    // Trap focus on tab key press.\n    if (event.keyCode === TAB_KEY) trapFocus.forInline(event, this.getPluginState().activeOverlayType, this.el)\n  }\n\n  // ___Why do we listen to the 'paste' event on a document instead of onPaste={props.handlePaste} prop,\n  //    or this.el.addEventListener('paste')?\n  //    Because (at least) Chrome doesn't handle paste if focus is on some button, e.g. 'My Device'.\n  //    => Therefore, the best option is to listen to all 'paste' events, and only react to them when we are focused on our\n  //       particular Uppy instance.\n  // ___Why do we still need onPaste={props.handlePaste} for the DashboardUi?\n  //    Because if we click on the 'Drop files here' caption e.g., `document.activeElement` will be 'body'. Which means our\n  //    standard determination of whether we're pasting into our Uppy instance won't work.\n  //    => Therefore, we need a traditional onPaste={props.handlePaste} handler too.\n  handlePasteOnBody = (event) => {\n    const isFocusInOverlay = this.el.contains(document.activeElement)\n    if (isFocusInOverlay) {\n      this.handlePaste(event)\n    }\n  }\n\n  handleComplete = ({ failed }) => {\n    if (this.opts.closeAfterFinish && failed.length === 0) {\n      // All uploads are done\n      this.requestCloseModal()\n    }\n  }\n\n  handleCancelRestore = () => {\n    this.uppy.emit('restore-canceled')\n  }\n\n  #generateLargeThumbnailIfSingleFile = () => {\n    if (this.opts.disableThumbnailGenerator) {\n      return\n    }\n\n    const LARGE_THUMBNAIL = 600\n    const files = this.uppy.getFiles()\n\n    if (files.length === 1) {\n      const thumbnailGenerator = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`)\n      thumbnailGenerator?.setOptions({ thumbnailWidth: LARGE_THUMBNAIL })\n      const fileForThumbnail = { ...files[0], preview: undefined }\n      thumbnailGenerator.requestThumbnail(fileForThumbnail).then(() => {\n        thumbnailGenerator?.setOptions({ thumbnailWidth: this.opts.thumbnailWidth })\n      })\n    }\n  }\n\n  #openFileEditorWhenFilesAdded = (files) => {\n    const firstFile = files[0]\n    if (this.canEditFile(firstFile)) {\n      this.openFileEditor(firstFile)\n    }\n  }\n\n  initEvents = () => {\n    // Modal open button\n    if (this.opts.trigger && !this.opts.inline) {\n      const showModalTrigger = findAllDOMElements(this.opts.trigger)\n      if (showModalTrigger) {\n        showModalTrigger.forEach(trigger => trigger.addEventListener('click', this.openModal))\n      } else {\n        this.uppy.log('Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself', 'warning')\n      }\n    }\n\n    this.startListeningToResize()\n    document.addEventListener('paste', this.handlePasteOnBody)\n\n    this.uppy.on('plugin-remove', this.removeTarget)\n    this.uppy.on('file-added', this.hideAllPanels)\n    this.uppy.on('dashboard:modal-closed', this.hideAllPanels)\n    this.uppy.on('file-editor:complete', this.hideAllPanels)\n    this.uppy.on('complete', this.handleComplete)\n\n    this.uppy.on('files-added', this.#generateLargeThumbnailIfSingleFile)\n    this.uppy.on('file-removed', this.#generateLargeThumbnailIfSingleFile)\n\n    // ___Why fire on capture?\n    //    Because this.ifFocusedOnUppyRecently needs to change before onUpdate() fires.\n    document.addEventListener('focus', this.recordIfFocusedOnUppyRecently, true)\n    document.addEventListener('click', this.recordIfFocusedOnUppyRecently, true)\n\n    if (this.opts.inline) {\n      this.el.addEventListener('keydown', this.handleKeyDownInInline)\n    }\n\n    if (this.opts.autoOpenFileEditor) {\n      this.uppy.on('files-added', this.#openFileEditorWhenFilesAdded)\n    }\n  }\n\n  removeEvents = () => {\n    const showModalTrigger = findAllDOMElements(this.opts.trigger)\n    if (!this.opts.inline && showModalTrigger) {\n      showModalTrigger.forEach(trigger => trigger.removeEventListener('click', this.openModal))\n    }\n\n    this.stopListeningToResize()\n    document.removeEventListener('paste', this.handlePasteOnBody)\n\n    window.removeEventListener('popstate', this.handlePopState, false)\n    this.uppy.off('plugin-remove', this.removeTarget)\n    this.uppy.off('file-added', this.hideAllPanels)\n    this.uppy.off('dashboard:modal-closed', this.hideAllPanels)\n    this.uppy.off('file-editor:complete', this.hideAllPanels)\n    this.uppy.off('complete', this.handleComplete)\n\n    this.uppy.off('files-added', this.#generateLargeThumbnailIfSingleFile)\n    this.uppy.off('file-removed', this.#generateLargeThumbnailIfSingleFile)\n\n    document.removeEventListener('focus', this.recordIfFocusedOnUppyRecently)\n    document.removeEventListener('click', this.recordIfFocusedOnUppyRecently)\n\n    if (this.opts.inline) {\n      this.el.removeEventListener('keydown', this.handleKeyDownInInline)\n    }\n\n    if (this.opts.autoOpenFileEditor) {\n      this.uppy.off('files-added', this.#openFileEditorWhenFilesAdded)\n    }\n  }\n\n  superFocusOnEachUpdate = () => {\n    const isFocusInUppy = this.el.contains(document.activeElement)\n    // When focus is lost on the page (== focus is on body for most browsers, or focus is null for IE11)\n    const isFocusNowhere = document.activeElement === document.body || document.activeElement === null\n    const isInformerHidden = this.uppy.getState().info.length === 0\n    const isModal = !this.opts.inline\n\n    if (\n      // If update is connected to showing the Informer - let the screen reader calmly read it.\n      isInformerHidden\n      && (\n        // If we are in a modal - always superfocus without concern for other elements\n        // on the page (user is unlikely to want to interact with the rest of the page)\n        isModal\n        // If we are already inside of Uppy, or\n        || isFocusInUppy\n        // If we are not focused on anything BUT we have already, at least once, focused on uppy\n        //   1. We focus when isFocusNowhere, because when the element we were focused\n        //      on disappears (e.g. an overlay), - focus gets lost. If user is typing\n        //      something somewhere else on the page, - focus won't be 'nowhere'.\n        //   2. We only focus when focus is nowhere AND this.ifFocusedOnUppyRecently,\n        //      to avoid focus jumps if we do something else on the page.\n        //   [Practical check] Without '&& this.ifFocusedOnUppyRecently', in Safari, in inline mode,\n        //                     when file is uploading, - navigate via tab to the checkbox,\n        //                     try to press space multiple times. Focus will jump to Uppy.\n        || (isFocusNowhere && this.ifFocusedOnUppyRecently)\n      )\n    ) {\n      this.superFocus(this.el, this.getPluginState().activeOverlayType)\n    } else {\n      this.superFocus.cancel()\n    }\n  }\n\n  afterUpdate = () => {\n    if (this.opts.disabled && !this.dashboardIsDisabled) {\n      this.disableInteractiveElements(true)\n      return\n    }\n\n    if (!this.opts.disabled && this.dashboardIsDisabled) {\n      this.disableInteractiveElements(false)\n    }\n\n    this.superFocusOnEachUpdate()\n  }\n\n  saveFileCard = (meta, fileID) => {\n    this.uppy.setFileMeta(fileID, meta)\n    this.toggleFileCard(false, fileID)\n  }\n\n  #attachRenderFunctionToTarget = (target) => {\n    const plugin = this.uppy.getPlugin(target.id)\n    return {\n      ...target,\n      icon: plugin.icon || this.opts.defaultPickerIcon,\n      render: plugin.render,\n    }\n  }\n\n  #isTargetSupported = (target) => {\n    const plugin = this.uppy.getPlugin(target.id)\n    // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n    if (typeof plugin.isSupported !== 'function') {\n      return true\n    }\n    return plugin.isSupported()\n  }\n\n  #getAcquirers = memoize((targets) => {\n    return targets\n      .filter(target => target.type === 'acquirer' && this.#isTargetSupported(target))\n      .map(this.#attachRenderFunctionToTarget)\n  })\n\n  #getProgressIndicators = memoize((targets) => {\n    return targets\n      .filter(target => target.type === 'progressindicator')\n      .map(this.#attachRenderFunctionToTarget)\n  })\n\n  #getEditors = memoize((targets) => {\n    return targets\n      .filter(target => target.type === 'editor')\n      .map(this.#attachRenderFunctionToTarget)\n  })\n\n  render = (state) => {\n    const pluginState = this.getPluginState()\n    const { files, capabilities, allowNewUpload } = state\n    const {\n      newFiles,\n      uploadStartedFiles,\n      completeFiles,\n      erroredFiles,\n      inProgressFiles,\n      inProgressNotPausedFiles,\n      processingFiles,\n\n      isUploadStarted,\n      isAllComplete,\n      isAllErrored,\n      isAllPaused,\n    } = this.uppy.getObjectOfFilesPerState()\n\n    const acquirers = this.#getAcquirers(pluginState.targets)\n    const progressindicators = this.#getProgressIndicators(pluginState.targets)\n    const editors = this.#getEditors(pluginState.targets)\n\n    let theme\n    if (this.opts.theme === 'auto') {\n      theme = capabilities.darkMode ? 'dark' : 'light'\n    } else {\n      theme = this.opts.theme\n    }\n\n    if (['files', 'folders', 'both'].indexOf(this.opts.fileManagerSelectionType) < 0) {\n      this.opts.fileManagerSelectionType = 'files'\n      // eslint-disable-next-line no-console\n      console.warn(`Unsupported option for \"fileManagerSelectionType\". Using default of \"${this.opts.fileManagerSelectionType}\".`)\n    }\n\n    return DashboardUI({\n      state,\n      isHidden: pluginState.isHidden,\n      files,\n      newFiles,\n      uploadStartedFiles,\n      completeFiles,\n      erroredFiles,\n      inProgressFiles,\n      inProgressNotPausedFiles,\n      processingFiles,\n      isUploadStarted,\n      isAllComplete,\n      isAllErrored,\n      isAllPaused,\n      totalFileCount: Object.keys(files).length,\n      totalProgress: state.totalProgress,\n      allowNewUpload,\n      acquirers,\n      theme,\n      disabled: this.opts.disabled,\n      disableLocalFiles: this.opts.disableLocalFiles,\n      direction: this.opts.direction,\n      activePickerPanel: pluginState.activePickerPanel,\n      showFileEditor: pluginState.showFileEditor,\n      saveFileEditor: this.saveFileEditor,\n      disableInteractiveElements: this.disableInteractiveElements,\n      animateOpenClose: this.opts.animateOpenClose,\n      isClosing: pluginState.isClosing,\n      progressindicators,\n      editors,\n      autoProceed: this.uppy.opts.autoProceed,\n      id: this.id,\n      closeModal: this.requestCloseModal,\n      handleClickOutside: this.handleClickOutside,\n      handleInputChange: this.handleInputChange,\n      handlePaste: this.handlePaste,\n      inline: this.opts.inline,\n      showPanel: this.showPanel,\n      hideAllPanels: this.hideAllPanels,\n      i18n: this.i18n,\n      i18nArray: this.i18nArray,\n      uppy: this.uppy,\n      note: this.opts.note,\n      recoveredState: state.recoveredState,\n      metaFields: pluginState.metaFields,\n      resumableUploads: capabilities.resumableUploads || false,\n      individualCancellation: capabilities.individualCancellation,\n      isMobileDevice: capabilities.isMobileDevice,\n      fileCardFor: pluginState.fileCardFor,\n      toggleFileCard: this.toggleFileCard,\n      toggleAddFilesPanel: this.toggleAddFilesPanel,\n      showAddFilesPanel: pluginState.showAddFilesPanel,\n      saveFileCard: this.saveFileCard,\n      openFileEditor: this.openFileEditor,\n      canEditFile: this.canEditFile,\n      width: this.opts.width,\n      height: this.opts.height,\n      showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,\n      fileManagerSelectionType: this.opts.fileManagerSelectionType,\n      proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,\n      hideCancelButton: this.opts.hideCancelButton,\n      hideRetryButton: this.opts.hideRetryButton,\n      hidePauseResumeButton: this.opts.hidePauseResumeButton,\n      showRemoveButtonAfterComplete: this.opts.showRemoveButtonAfterComplete,\n      containerWidth: pluginState.containerWidth,\n      containerHeight: pluginState.containerHeight,\n      areInsidesReadyToBeVisible: pluginState.areInsidesReadyToBeVisible,\n      isTargetDOMEl: this.isTargetDOMEl,\n      parentElement: this.el,\n      allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,\n      maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles,\n      requiredMetaFields: this.uppy.opts.restrictions.requiredMetaFields,\n      showSelectedFiles: this.opts.showSelectedFiles,\n      showNativePhotoCameraButton: this.opts.showNativePhotoCameraButton,\n      showNativeVideoCameraButton: this.opts.showNativeVideoCameraButton,\n      nativeCameraFacingMode: this.opts.nativeCameraFacingMode,\n      singleFileFullScreen: this.opts.singleFileFullScreen,\n      handleCancelRestore: this.handleCancelRestore,\n      handleRequestThumbnail: this.handleRequestThumbnail,\n      handleCancelThumbnail: this.handleCancelThumbnail,\n      // drag props\n      isDraggingOver: pluginState.isDraggingOver,\n      handleDragOver: this.handleDragOver,\n      handleDragLeave: this.handleDragLeave,\n      handleDrop: this.handleDrop,\n    })\n  }\n\n  discoverProviderPlugins = () => {\n    this.uppy.iteratePlugins((plugin) => {\n      if (plugin && !plugin.target && plugin.opts && plugin.opts.target === this.constructor) {\n        this.addTarget(plugin)\n      }\n    })\n  }\n\n  install = () => {\n    // Set default state for Dashboard\n    this.setPluginState({\n      isHidden: true,\n      fileCardFor: null,\n      activeOverlayType: null,\n      showAddFilesPanel: false,\n      activePickerPanel: false,\n      showFileEditor: false,\n      metaFields: this.opts.metaFields,\n      targets: [],\n      // We'll make them visible once .containerWidth is determined\n      areInsidesReadyToBeVisible: false,\n      isDraggingOver: false,\n    })\n\n    const { inline, closeAfterFinish } = this.opts\n    if (inline && closeAfterFinish) {\n      throw new Error('[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.')\n    }\n\n    const { allowMultipleUploads, allowMultipleUploadBatches } = this.uppy.opts\n    if ((allowMultipleUploads || allowMultipleUploadBatches) && closeAfterFinish) {\n      this.uppy.log('[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true', 'warning')\n    }\n\n    const { target } = this.opts\n\n    if (target) {\n      this.mount(target, this)\n    }\n\n    const plugins = this.opts.plugins || []\n\n    plugins.forEach((pluginID) => {\n      const plugin = this.uppy.getPlugin(pluginID)\n      if (plugin) {\n        plugin.mount(this, plugin)\n      }\n    })\n\n    if (!this.opts.disableStatusBar) {\n      this.uppy.use(StatusBar, {\n        id: `${this.id}:StatusBar`,\n        target: this,\n        hideUploadButton: this.opts.hideUploadButton,\n        hideRetryButton: this.opts.hideRetryButton,\n        hidePauseResumeButton: this.opts.hidePauseResumeButton,\n        hideCancelButton: this.opts.hideCancelButton,\n        showProgressDetails: this.opts.showProgressDetails,\n        hideAfterFinish: this.opts.hideProgressAfterFinish,\n        locale: this.opts.locale,\n        doneButtonHandler: this.opts.doneButtonHandler,\n      })\n    }\n\n    if (!this.opts.disableInformer) {\n      this.uppy.use(Informer, {\n        id: `${this.id}:Informer`,\n        target: this,\n      })\n    }\n\n    if (!this.opts.disableThumbnailGenerator) {\n      this.uppy.use(ThumbnailGenerator, {\n        id: `${this.id}:ThumbnailGenerator`,\n        thumbnailWidth: this.opts.thumbnailWidth,\n        thumbnailHeight: this.opts.thumbnailHeight,\n        thumbnailType: this.opts.thumbnailType,\n        waitForThumbnailsBeforeUpload: this.opts.waitForThumbnailsBeforeUpload,\n        // If we don't block on thumbnails, we can lazily generate them\n        lazy: !this.opts.waitForThumbnailsBeforeUpload,\n      })\n    }\n\n    // Dark Mode / theme\n    this.darkModeMediaQuery = (typeof window !== 'undefined' && window.matchMedia)\n      ? window.matchMedia('(prefers-color-scheme: dark)')\n      : null\n\n    const isDarkModeOnFromTheStart = this.darkModeMediaQuery ? this.darkModeMediaQuery.matches : false\n    this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnFromTheStart ? 'on' : 'off'}`)\n    this.setDarkModeCapability(isDarkModeOnFromTheStart)\n\n    if (this.opts.theme === 'auto') {\n      this.darkModeMediaQuery.addListener(this.handleSystemDarkModeChange)\n    }\n\n    this.discoverProviderPlugins()\n    this.initEvents()\n  }\n\n  uninstall = () => {\n    if (!this.opts.disableInformer) {\n      const informer = this.uppy.getPlugin(`${this.id}:Informer`)\n      // Checking if this plugin exists, in case it was removed by uppy-core\n      // before the Dashboard was.\n      if (informer) this.uppy.removePlugin(informer)\n    }\n\n    if (!this.opts.disableStatusBar) {\n      const statusBar = this.uppy.getPlugin(`${this.id}:StatusBar`)\n      if (statusBar) this.uppy.removePlugin(statusBar)\n    }\n\n    if (!this.opts.disableThumbnailGenerator) {\n      const thumbnail = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`)\n      if (thumbnail) this.uppy.removePlugin(thumbnail)\n    }\n\n    const plugins = this.opts.plugins || []\n    plugins.forEach((pluginID) => {\n      const plugin = this.uppy.getPlugin(pluginID)\n      if (plugin) plugin.unmount()\n    })\n\n    if (this.opts.theme === 'auto') {\n      this.darkModeMediaQuery.removeListener(this.handleSystemDarkModeChange)\n    }\n\n    this.unmount()\n    this.removeEvents()\n  }\n}\n"],"mappings":"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"}