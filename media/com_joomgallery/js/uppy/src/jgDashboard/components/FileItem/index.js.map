{"version":3,"names":["h","Component","classNames","shallowEqual","FilePreviewAndLink","FileProgress","FileInfo","Buttons","FileItem","componentDidMount","file","props","preview","handleRequestThumbnail","shouldComponentUpdate","nextProps","componentDidUpdate","componentWillUnmount","handleCancelThumbnail","render","isProcessing","progress","preprocess","postprocess","isUploaded","uploadComplete","error","uploadInProgressOrComplete","uploadStarted","uploadInProgress","isGhost","showRemoveButton","individualCancellation","showRemoveButtonAfterComplete","dashboardItemClass","recoveredState","resumableUploads","id","role","showLinkToFileUploadResult","i18n","toggleFileCard","metaFields","uppy","hideRetryButton","hideCancelButton","hidePauseResumeButton","acquirers","containerWidth","containerHeight","toggleAddFilesPanel","isSingleFile","canEditFile","openFileEditor"],"sources":["index.jsx"],"sourcesContent":["import {  h, Component  } from 'preact'\nimport classNames from 'classnames'\nimport shallowEqual from 'is-shallow-equal'\nimport FilePreviewAndLink from './FilePreviewAndLink/index.jsx'\nimport FileProgress from './FileProgress/index.jsx'\nimport FileInfo from './FileInfo/index.jsx'\nimport Buttons from './Buttons/index.jsx'\n\nexport default class FileItem extends Component {\n  componentDidMount () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  shouldComponentUpdate (nextProps) {\n    return !shallowEqual(this.props, nextProps)\n  }\n\n  // VirtualList mounts FileItems again and they emit `thumbnail:request`\n  // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n  componentDidUpdate () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  componentWillUnmount () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleCancelThumbnail(file)\n    }\n  }\n\n  render () {\n    const { file } = this.props\n\n    const isProcessing = file.progress.preprocess || file.progress.postprocess\n    const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error\n    const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing\n    const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) || isProcessing\n    const error = file.error || false\n\n    // File that Golden Retriever was able to partly restore (only meta, not blob),\n    // users still need to re-add it, so itâ€™s a ghost\n    const { isGhost } = file\n\n    let showRemoveButton = this.props.individualCancellation\n      ? !isUploaded\n      : !uploadInProgress && !isUploaded\n\n    if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n      showRemoveButton = true\n    }\n\n    const dashboardItemClass = classNames({\n      'uppy-Dashboard-Item': true,\n      'is-inprogress': uploadInProgress && !this.props.recoveredState,\n      'is-processing': isProcessing,\n      'is-complete': isUploaded,\n      'is-error': !!error,\n      'is-resumable': this.props.resumableUploads,\n      'is-noIndividualCancellation': !this.props.individualCancellation,\n      'is-ghost': isGhost,\n    })\n\n    return (\n      <div\n        className={dashboardItemClass}\n        id={`uppy_${file.id}`}\n        role={this.props.role}\n      >\n        <div className=\"uppy-Dashboard-Item-preview\">\n          <FilePreviewAndLink\n            file={file}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            i18n={this.props.i18n}\n            toggleFileCard={this.props.toggleFileCard}\n            metaFields={this.props.metaFields}\n          />\n          <FileProgress\n            uppy={this.props.uppy}\n            file={file}\n            error={error}\n            isUploaded={isUploaded}\n            hideRetryButton={this.props.hideRetryButton}\n            hideCancelButton={this.props.hideCancelButton}\n            hidePauseResumeButton={this.props.hidePauseResumeButton}\n            recoveredState={this.props.recoveredState}\n            showRemoveButtonAfterComplete={this.props.showRemoveButtonAfterComplete}\n            resumableUploads={this.props.resumableUploads}\n            individualCancellation={this.props.individualCancellation}\n            i18n={this.props.i18n}\n          />\n        </div>\n\n        <div className=\"uppy-Dashboard-Item-fileInfoAndButtons\">\n          <FileInfo\n            file={file}\n            id={this.props.id}\n            acquirers={this.props.acquirers}\n            containerWidth={this.props.containerWidth}\n            containerHeight={this.props.containerHeight}\n            i18n={this.props.i18n}\n            toggleAddFilesPanel={this.props.toggleAddFilesPanel}\n            toggleFileCard={this.props.toggleFileCard}\n            metaFields={this.props.metaFields}\n            isSingleFile={this.props.isSingleFile}\n          />\n          <Buttons\n            file={file}\n            metaFields={this.props.metaFields}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            showRemoveButton={showRemoveButton}\n            canEditFile={this.props.canEditFile}\n            uploadInProgressOrComplete={uploadInProgressOrComplete}\n            toggleFileCard={this.props.toggleFileCard}\n            openFileEditor={this.props.openFileEditor}\n            uppy={this.props.uppy}\n            i18n={this.props.i18n}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n"],"mappings":"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"}