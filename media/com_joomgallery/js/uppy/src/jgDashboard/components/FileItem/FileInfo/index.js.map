{"version":3,"names":["h","Fragment","prettierBytes","truncateString","MetaErrorMessage","renderFileName","props","author","name","file","meta","getMaxNameLength","isSingleFile","containerHeight","containerWidth","renderAuthor","providerName","remote","dot","url","renderFileSize","size","ReSelectButton","isGhost","toggleAddFilesPanel","i18n","ErrorButton","onClick","error","FileInfo","source","alert","toggleFileCard","metaFields"],"sources":["index.jsx"],"sourcesContent":["import {  h, Fragment  } from 'preact'\nimport prettierBytes from '@transloadit/prettier-bytes'\nimport truncateString from '@uppy/utils/lib/truncateString'\nimport MetaErrorMessage from '../MetaErrorMessage.jsx'\n\nconst renderFileName = (props) => {\n  const { author, name } = props.file.meta\n\n  function getMaxNameLength () {\n    if (props.isSingleFile && props.containerHeight >= 350) {\n      return 90\n    }\n    if (props.containerWidth <= 352) {\n      return 35\n    }\n    if (props.containerWidth <= 576) {\n      return 60\n    }\n    // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n    return author ? 20 : 30\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-name\" title={name}>\n      {truncateString(name, getMaxNameLength())}\n    </div>\n  )\n}\n\nconst renderAuthor = (props) => {\n  const { author } = props.file.meta\n  const { providerName } = props.file.remote\n  const dot = `\\u00B7`\n\n  if (!author) {\n    return null\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-author\">\n      <a\n        href={`${author.url}?utm_source=Companion&utm_medium=referral`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {truncateString(author.name, 13)}\n      </a>\n      {providerName ? (\n        <Fragment>\n          {` ${dot} `}\n          {providerName}\n          {` ${dot} `}\n        </Fragment>\n      ) : null}\n    </div>\n  )\n}\n\nconst renderFileSize = (props) => props.file.size && (\n  <div className=\"uppy-Dashboard-Item-statusSize\">\n    {prettierBytes(props.file.size)}\n  </div>\n)\n\nconst ReSelectButton = (props) => props.file.isGhost && (\n  <span>\n    {' \\u2022 '}\n    <button\n      className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\"\n      type=\"button\"\n      onClick={props.toggleAddFilesPanel}\n    >\n      {props.i18n('reSelect')}\n    </button>\n  </span>\n)\n\nconst ErrorButton = ({ file, onClick }) => {\n  if (file.error) {\n    return (\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails\"\n        aria-label={file.error}\n        data-microtip-position=\"bottom\"\n        data-microtip-size=\"medium\"\n        onClick={onClick}\n        type=\"button\"\n      >\n        ?\n      </button>\n    )\n  }\n  return null\n}\n\nexport default function FileInfo (props) {\n  const { file } = props\n  return (\n    <div\n      className=\"uppy-Dashboard-Item-fileInfo\"\n      data-uppy-file-source={file.source}\n    >\n      <div className=\"uppy-Dashboard-Item-fileName\">\n        {renderFileName(props)}\n        <ErrorButton\n          file={props.file}\n          // eslint-disable-next-line no-alert\n          onClick={() => alert(props.file.error)} // TODO: move to a custom alert implementation\n        />\n      </div>\n      <div className=\"uppy-Dashboard-Item-status\">\n        {renderAuthor(props)}\n        {renderFileSize(props)}\n        {ReSelectButton(props)}\n      </div>\n      <MetaErrorMessage\n        file={props.file}\n        i18n={props.i18n}\n        toggleFileCard={props.toggleFileCard}\n        metaFields={props.metaFields}\n      />\n    </div>\n  )\n}\n"],"mappings":"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"}