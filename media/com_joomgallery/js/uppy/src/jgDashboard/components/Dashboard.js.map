{"version":3,"names":["h","classNames","isDragDropSupported","FileList","AddFiles","AddFilesPanel","PickerPanelContent","EditorPanel","PanelTopBar","FileCard","Slide","WIDTH_XL","WIDTH_LG","WIDTH_MD","HEIGHT_MD","Dashboard","props","isNoFiles","totalFileCount","isSingleFile","isSizeMD","containerWidth","isSizeHeightMD","containerHeight","dashboardClassName","disabled","animateOpenClose","isClosing","isDraggingOver","inline","showAddFilesPanel","areInsidesReadyToBeVisible","singleFileFullScreen","itemsPerRow","showFileList","showSelectedFiles","numberOfFilesForRecovery","recoveredState","Object","keys","files","length","numberOfGhosts","filter","fileID","isGhost","renderRestoredText","i18n","smart_count","dashboard","theme","acquirers","disableLocalFiles","isHidden","handlePaste","handleDragOver","handleDragLeave","handleDrop","handleClickOutside","width","height","closeModal","id","error","uppy","resumableUploads","hideRetryButton","hidePauseResumeButton","hideCancelButton","showLinkToFileUploadResult","showRemoveButtonAfterComplete","isWide","metaFields","toggleFileCard","handleRequestThumbnail","handleCancelThumbnail","individualCancellation","openFileEditor","canEditFile","toggleAddFilesPanel","fileCardFor","activePickerPanel","showFileEditor","progressindicators","map","target","getPlugin","render","state"],"sources":["Dashboard.jsx"],"sourcesContent":["import { h } from 'preact'\nimport classNames from 'classnames'\nimport isDragDropSupported from '@uppy/utils/lib/isDragDropSupported'\nimport FileList from './FileList.jsx'\nimport AddFiles from './AddFiles.jsx'\nimport AddFilesPanel from './AddFilesPanel.jsx'\nimport PickerPanelContent from './PickerPanelContent.jsx'\nimport EditorPanel from './EditorPanel.jsx'\nimport PanelTopBar from './PickerPanelTopBar.jsx'\nimport FileCard from './FileCard/index.jsx'\nimport Slide from './Slide.jsx'\n\n// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n// https://github.com/ghosh/micromodal\n\nconst WIDTH_XL = 900\nconst WIDTH_LG = 700\nconst WIDTH_MD = 576\n\nconst HEIGHT_MD = 330\n// We might want to enable this in the future\n// const HEIGHT_LG = 400\n// const HEIGHT_XL = 460\n\nexport default function Dashboard (props) {\n  const isNoFiles = props.totalFileCount === 0\n  const isSingleFile = props.totalFileCount === 1\n  const isSizeMD = props.containerWidth > WIDTH_MD\n  const isSizeHeightMD = props.containerHeight > HEIGHT_MD\n\n  const dashboardClassName = classNames({\n    'uppy-Dashboard': true,\n    'uppy-Dashboard--isDisabled': props.disabled,\n    'uppy-Dashboard--animateOpenClose': props.animateOpenClose,\n    'uppy-Dashboard--isClosing': props.isClosing,\n    'uppy-Dashboard--isDraggingOver': props.isDraggingOver,\n    'uppy-Dashboard--modal': !props.inline,\n    'uppy-size--md': props.containerWidth > WIDTH_MD,\n    'uppy-size--lg': props.containerWidth > WIDTH_LG,\n    'uppy-size--xl': props.containerWidth > WIDTH_XL,\n    'uppy-size--height-md': props.containerHeight > HEIGHT_MD,\n    // We might want to enable this in the future\n    // 'uppy-size--height-lg': props.containerHeight > HEIGHT_LG,\n    // 'uppy-size--height-xl': props.containerHeight > HEIGHT_XL,\n    'uppy-Dashboard--isAddFilesPanelVisible': props.showAddFilesPanel,\n    'uppy-Dashboard--isInnerWrapVisible': props.areInsidesReadyToBeVisible,\n    // Only enable “centered single file” mode when Dashboard is tall enough\n    'uppy-Dashboard--singleFile': props.singleFileFullScreen && isSingleFile && isSizeHeightMD,\n  })\n\n  // Important: keep these in sync with the percent width values in `src/components/FileItem/index.scss`.\n  let itemsPerRow = 1 // mobile\n  if (props.containerWidth > WIDTH_XL) {\n    itemsPerRow = 5\n  } else if (props.containerWidth > WIDTH_LG) {\n    itemsPerRow = 4\n  } else if (props.containerWidth > WIDTH_MD) {\n    itemsPerRow = 3\n  }\n\n  const showFileList = props.showSelectedFiles && !isNoFiles\n\n  const numberOfFilesForRecovery = props.recoveredState ? Object.keys(props.recoveredState.files).length : null\n  const numberOfGhosts = props.files ? Object.keys(props.files).filter((fileID) => props.files[fileID].isGhost).length : null\n\n  const renderRestoredText = () => {\n    if (numberOfGhosts > 0) {\n      return props.i18n('recoveredXFiles', {\n        smart_count: numberOfGhosts,\n      })\n    }\n\n    return props.i18n('recoveredAllFiles')\n  }\n\n  const dashboard = (\n    <div\n      className={dashboardClassName}\n      data-uppy-theme={props.theme}\n      data-uppy-num-acquirers={props.acquirers.length}\n      data-uppy-drag-drop-supported={!props.disableLocalFiles && isDragDropSupported()}\n      aria-hidden={props.inline ? 'false' : props.isHidden}\n      aria-disabled={props.disabled}\n      aria-label={!props.inline ? props.i18n('dashboardWindowTitle') : props.i18n('dashboardTitle')}\n      onPaste={props.handlePaste}\n      onDragOver={props.handleDragOver}\n      onDragLeave={props.handleDragLeave}\n      onDrop={props.handleDrop}\n    >\n      <div\n        aria-hidden=\"true\"\n        className=\"uppy-Dashboard-overlay\"\n        tabIndex={-1}\n        onClick={props.handleClickOutside}\n      />\n\n      <div\n        className=\"uppy-Dashboard-inner\"\n        aria-modal={!props.inline && 'true'}\n        role={!props.inline && 'dialog'}\n        style={{\n          width: props.inline && props.width ? props.width : '',\n          height: props.inline && props.height ? props.height : '',\n        }}\n      >\n\n        {!props.inline ? (\n          <button\n            className=\"uppy-u-reset uppy-Dashboard-close\"\n            type=\"button\"\n            aria-label={props.i18n('closeModal')}\n            title={props.i18n('closeModal')}\n            onClick={props.closeModal}\n          >\n            <span aria-hidden=\"true\">&times;</span>\n          </button>\n        ) : null}\n\n        <div className=\"uppy-Dashboard-innerWrap\">\n          <div className=\"uppy-Dashboard-dropFilesHereHint\">\n            {props.i18n('dropHint')}\n          </div>\n\n          {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n          {showFileList && <PanelTopBar {...props} />}\n\n          {numberOfFilesForRecovery && (\n            <div className=\"uppy-Dashboard-serviceMsg\">\n              <svg className=\"uppy-Dashboard-serviceMsg-icon\" aria-hidden=\"true\" focusable=\"false\" width=\"21\" height=\"16\" viewBox=\"0 0 24 19\">\n                <g transform=\"translate(0 -1)\" fill=\"none\" fillRule=\"evenodd\">\n                  <path d=\"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z\" fill=\"#FFD300\" />\n                  <path fill=\"#000\" d=\"M11 6h2l-.3 8h-1.4z\" />\n                  <circle fill=\"#000\" cx=\"12\" cy=\"17\" r=\"1\" />\n                </g>\n              </svg>\n              <strong className=\"uppy-Dashboard-serviceMsg-title\">\n                {props.i18n('sessionRestored')}\n              </strong>\n              <div className=\"uppy-Dashboard-serviceMsg-text\">\n                {renderRestoredText()}\n              </div>\n            </div>\n          )}\n\n          {showFileList ? (\n            <FileList\n              id={props.id}\n              error={props.error}\n              i18n={props.i18n}\n              uppy={props.uppy}\n              files={props.files}\n              acquirers={props.acquirers}\n              resumableUploads={props.resumableUploads}\n              hideRetryButton={props.hideRetryButton}\n              hidePauseResumeButton={props.hidePauseResumeButton}\n              hideCancelButton={props.hideCancelButton}\n              showLinkToFileUploadResult={props.showLinkToFileUploadResult}\n              showRemoveButtonAfterComplete={props.showRemoveButtonAfterComplete}\n              isWide={props.isWide}\n              metaFields={props.metaFields}\n              toggleFileCard={props.toggleFileCard}\n              handleRequestThumbnail={props.handleRequestThumbnail}\n              handleCancelThumbnail={props.handleCancelThumbnail}\n              recoveredState={props.recoveredState}\n              individualCancellation={props.individualCancellation}\n              openFileEditor={props.openFileEditor}\n              canEditFile={props.canEditFile}\n              toggleAddFilesPanel={props.toggleAddFilesPanel}\n              isSingleFile={isSingleFile}\n              itemsPerRow={itemsPerRow}\n            />\n          ) : (\n            // eslint-disable-next-line react/jsx-props-no-spreading\n            <AddFiles {...props} isSizeMD={isSizeMD} />\n          )}\n\n          <Slide>\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n            {props.showAddFilesPanel ? <AddFilesPanel key=\"AddFiles\" {...props} isSizeMD={isSizeMD} /> : null}\n          </Slide>\n\n          <Slide>\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n            {props.fileCardFor ? <FileCard key=\"FileCard\" {...props} /> : null}\n          </Slide>\n\n          <Slide>\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n            {props.activePickerPanel ? <PickerPanelContent key=\"Picker\" {...props} /> : null}\n          </Slide>\n\n          <Slide>\n            {/* eslint-disable-next-line react/jsx-props-no-spreading */}\n            {props.showFileEditor ? <EditorPanel key=\"Editor\" {...props} /> : null}\n          </Slide>\n\n          <div className=\"uppy-Dashboard-progressindicators\">\n            {props.progressindicators.map((target) => {\n              return props.uppy.getPlugin(target.id).render(props.state)\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n\n  return dashboard\n}\n"],"mappings":"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"}