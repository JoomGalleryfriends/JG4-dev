!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).InfiniteScroll={})}(this,function(t){"use strict";var n=function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e={exports:{}},i=e.exports=function(){var d=arguments,a=void 0,t;return function(n,o,s){var r;return o=o||15,function(){var t=a,e=d,i=s&&r;clearTimeout(r),r=setTimeout(function(){r=null,s||n.apply(t,e)},o),i&&n.apply(t,e)}}}(),e=(o.prototype.init=function(){return this.bind().hideNext(),this},o.prototype.getLoadingPosition=function(){var t=this.container;return t.offsetTop+t.clientHeight},o.prototype.getScrollPosition=function(){return this.win.scrollY+this.options.viewportTriggerPoint},o.prototype.loadMore=function(){var o,s,r,t,d,a=this;this.getScrollPosition()<this.getLoadingPosition()||this.isLoading||this.isAtEnd||!this.next||(t=this.options,o=t.item,s=t.next,r=t.onComplete,t=t.disabledClass,d=void 0===t?this.defaultOptions.disabledClass:t,this.isLoading=!0,this.next.classList.add(d),this.makeRequest(this.next.href,function(t){var e=Array.from(t.querySelectorAll(o)).map(function(t){return t.outerHTML}).join(""),i=(null===(n=t.querySelector(s))||void 0===n?void 0:n.getAttribute("href"))||"";a.next&&(a.next.href=i,a.next.classList.remove(d));var n=a.container;n.innerHTML+=e,a.isLoading=!1,a.isAtEnd=""===i,r&&"function"==typeof r&&r(n,t)}))},o.prototype.hideNext=function(){return this.next&&this.next.classList.add(this.options.hiddenClass||this.defaultOptions.hiddenClass),this},o.prototype.bind=function(){var t=this;return this.win.addEventListener("load",function(){t.loadMore()}),this.win.addEventListener("scroll",function(){i(t.loadMore(),t.options.debounceTime)}),this},o.prototype.makeRequest=function(t,e){var i=this,n=new XMLHttpRequest;n.open(this.options.requestMethod||this.defaultOptions.requestMethod,t),n.onload=function(){var t;200<=n.status&&n.status<400&&(t=n.responseText,t=(new DOMParser).parseFromString(t,i.options.responseType||i.defaultOptions.responseType),e(t))},n.send()},o);function o(t,e,i){void 0===t&&(t={}),void 0===e&&(e=document),void 0===i&&(i=window),this.defaultOptions={element:".js-infinite",next:".js-infinite__next",item:".js-infinite__item",disabledClass:"disabled",hiddenClass:"hidden",responseType:"text/html",requestMethod:"GET",debounceTime:500,onComplete:null,viewportTriggerPoint:window.innerHeight/2},this.options=n(n({},this.defaultOptions),t),this.win=i,this.doc=e,this.container=this.doc.querySelector(this.options.element),this.next=this.doc.querySelector(this.options.next),this.isLoading=!1,this.isAtEnd=!1,this.container&&this.init()}t.InfiniteScroll=e,t.default=e,Object.defineProperty(t,"__esModule",{value:!0})});